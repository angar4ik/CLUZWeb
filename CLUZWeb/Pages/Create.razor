@page "/create"
@using Models
@using CLUZWeb.Services
@inject NavigationManager NavigationManager
@inject GamePoolService _gamePool

<h2>Create</h2>

<EditForm autocomplete="off" Model="@_createGameModel" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="content px-2">
        <InputText class="form-inline" id="gname" placeholder="Name" @bind-Value="_createGameModel.Name" />
    </div>
    <div class="content px-2">
        <InputText class="form-inline" id="gpass" placeholder="Password" @bind-Value="@_createGameModel.Password" />
    </div>
    <div class="content px-2">
        <button class="btn btn-primary" type="submit">Create</button>
    </div>
</EditForm>

@code {
    private CreateGame _createGameModel = new CreateGame();

    private void HandleValidSubmit()
    {
        _gamePool.AddGame(_createGameModel.Name, _createGameModel.Password);
        NavigationManager.NavigateTo("/");
    }
}


